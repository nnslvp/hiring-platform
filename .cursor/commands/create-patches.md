# create-patches

Создает JSON патчи для всех вакансий из `vacancies.json` через GPT-4o mini.

## Использование

### Обработка одного батча
```bash
python3 process_with_gpt.py --batch-size 5 --start-from 0
```

**Параметры:**
- `--batch-size` - количество вакансий для обработки (по умолчанию: 5)
- `--start-from` - начать с вакансии номер N (по умолчанию: 0)
- `--output-dir` - папка для результатов (по умолчанию: patches/)
- `--vacancies-file` - файл с вакансиями (по умолчанию: vacancies.json)

### Автоматическая обработка всех вакансий
```bash
./process_all_vacancies.sh
```

Скрипт автоматически:
- Обрабатывает все вакансии пачками по 5 штук
- Делает паузу 2 секунды между батчами
- Показывает прогресс

### Проверка прогресса
```bash
ls patches/ | wc -l
```

## Формат выходных файлов

Файлы сохраняются как `patches/vacancy-{page_id}.json` с полями:
- Категория прав (multi_select)
- Тип техники (multi_select)  
- Регионы работы (multi_select)
- Минимальный опыт (месяцы) (number)
- Код 95 (select)
- ADR (select)
- Тип оплаты (select)
- Минимальная зарплата (нетто) (number)
- Максимальная зарплата (нетто) (number или null)
- Валюта зарплаты (select)
- Тип договора (select)
- Карта водителя (select)


Правила извлечения данных описаны в `filter-fields-basic.md`
